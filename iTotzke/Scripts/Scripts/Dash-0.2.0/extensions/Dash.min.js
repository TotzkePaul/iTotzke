/*!
 * Dash JavaScript Library
 * Version 0.2.0
 *
 * Copyright 2011, Eric Boll
 * Licensed under the GNU Lesser General Public License.
 * http://www.gnu.org/licenses/lgpl.html
 *
 * Uses the JQuery JavaScript Library under the MIT License
 * Copyright 2011, John Resig
 * http://jquery.org/license
 *
 * Uses the JQuery DataTables Plugin under the BSD (3-Point) License
 * Copyright (c) 2008-2011, Allan Jardine
 * All rights reserved.
 * http://datatables.net/license_bsd
 *
 * Uses the JQuery Timepicker Addon under the MIT License
 * Copyright 2011 Trent Richardson
 * http://trentrichardson.com/Impromptu/MIT-LICENSE.txt
 */
(function($){$.fn.dash=function(methodName,defaults)
{if($.fn.dash.methods[methodName])
{return $.fn.dash.methods[methodName].call(this,defaults);}
else if(typeof methodName==='object'||!methodName)
{return $.fn.dash.methods.init.call(this,methodName);}
else
{$.error('Method '+methodName+' does not exist in jQuery.dash');return this;}};$.fn.dash.methods={"init":function(defaults)
{for(var i in defaults)
{$(this).attr(i,defaults[i]);}
for(var i in $.fn.dash.initializers)
{$.fn.dash.initializers[i].call(this);}
return this;},"initAll":function()
{for(var i in $.fn.dash.initializers)
{$.fn.dash.initializers[i]();}
return this;},"destroy":function()
{this.each(function()
{var destroyFunction=$(this).data("destroy");if(destroyFunction!=null)
{destroyFunction($(this));$(this).removeData("destroy");}});return this;}};$.fn.dash.initializers=[function()
{var elements=$.fn.dash.dev.getCurrentElements.call(this,"[data-accordion='true']");elements.each(function()
{var def=$.extend({},$.fn.dash.defaults.accordion);$.fn.dash.dev.loadCustomDefaults(this);var autoHeight=$(this).attr("data-accordion-auto-height");def["autoHeight"]=(autoHeight!=null)?(autoHeight=="true"):def["autoHeight"];var collapsible=$(this).attr("data-accordion-collapsible");def["collapsible"]=(collapsible!=null)?collapsible=="true":def["collapsible"];def=$.fn.dash.dev.removeNullAttributes(def);$(this).accordion(def);$(this).data("destroy",function($this){$this.accordion("destroy");});});},initAutocompletes=function()
{var elements=$.fn.dash.dev.getCurrentElements.call(this,"[data-autocomplete='true']");elements.each(function()
{var def=$.extend({},$.fn.dash.defaults.autocomplete);$.fn.dash.dev.loadCustomDefaults(this);var source=$.fn.dash.dev.resolveNamespace($(this).attr("data-autocomplete-source"));def["source"]=source||$(this).attr("data-autocomplete-source")||def["source"];def=$.fn.dash.dev.removeNullAttributes(def);$(this).autocomplete(def);$(this).data("destroy",function($this){$this.autocomplete("destroy");});});},initButtons=function()
{var escapeClicks=function(button)
{if(navigator.appName=='Microsoft Internet Explorer')
{var onclick=$(button).attr("onclick");$(button).attr("onclick",onclick+"; return false;");return;}
var currentClick=button.getAttribute("onclick");button.setAttribute("onclick",currentClick==null?"return false;":currentClick+";return false;");};var elements=$.fn.dash.dev.getCurrentElements.call(this,"[data-button='true']");elements.each(function()
{var def=$.extend({},$.fn.dash.defaults.button);$.fn.dash.dev.loadCustomDefaults(this);var icon=$(this).attr("data-button-icon");def["icons"]=icon!=null?{primary:icon}:def["icons"];var text=$(this).attr("data-button-text");def["text"]=text!=null?text=="true":def["text"];def=$.fn.dash.dev.removeNullAttributes(def);$(this).button(def);$(this).data("destroy",function($this){$this.button("destroy");});escapeClicks(this);});},function()
{var getColumnDefs=function(table)
{var columnDefs=[];var headerList=$("th",table);if(headerList==null)
{return null;}
var hiddenList=[];var noSortList=[];for(var i=0;i<headerList.length;i++)
{if($(headerList[i]).attr("data-table-hidden")=="true")
{hiddenList.push(i);}
if($(headerList[i]).attr("data-table-sort")=="false")
{noSortList.push(i);}
if($(headerList[i]).attr("data-table-searchable"))
{columnDefs.push({"bSearchable":$(headerList[i]).attr("data-table-searchable")=="true","aTargets":[i]});}
if($("th[data-table-data-prop]").length!=0)
{columnDefs.push({"mDataProp":$(headerList[i]).attr("data-table-data-prop")||null,"aTargets":[i]});}
if($(headerList[i]).attr("data-table-width"))
{columnDefs.push({"sWidth":$(headerList[i]).attr("data-table-width"),"aTargets":[i]});}
if($(headerList[i]).attr("data-table-class"))
{columnDefs.push({"sClass":$(headerList[i]).attr("data-table-class"),"aTargets":[i]});}}
if(hiddenList.length>0)
columnDefs.push({"bVisible":false,"aTargets":hiddenList});if(noSortList.length>0)
columnDefs.push({"bSortable":false,"aTargets":noSortList});return columnDefs;};var getSortingFixed=function(table)
{var fixedSortList=[];var headerList=$("th",table);for(var i=0;i<headerList.length;i++)
{if($(headerList[i]).attr("data-table-sort-fixed"))
{fixedSortList.push([i,$(headerList[i]).attr("data-table-sort-fixed")]);}}
return fixedSortList;};var getSortingDefault=function(table)
{var defaultSortList=[];var headerList=$("th",table);for(var i=0;i<headerList.length;i++)
{if($(headerList[i]).attr("data-table-sort-default"))
{defaultSortList.push([i,$(headerList[i]).attr("data-table-sort-default")]);}}
return defaultSortList;};var elements=$.fn.dash.dev.getCurrentElements.call(this,"[data-table='true']");elements.each(function()
{var def=$.extend({},$.fn.dash.defaults.datatable);$.fn.dash.dev.loadCustomDefaults(this);var aaSorting=getSortingDefault(this);def["aaSorting"]=aaSorting.length>0?aaSorting:def["aaSorting"];var aaSortingFixed=getSortingFixed(this);def["aaSortingFixed"]=aaSortingFixed.length>0?aaSortingFixed:def["aaSortingFixed"];var aoColumnDefs=getColumnDefs(this);def["aoColumnDefs"]=aoColumnDefs.length>0?aoColumnDefs:def["aoColumnDefs"];var bAutoWidth=$(this).attr("data-table-auto-width");def["bAutoWidth"]=bAutoWidth!=null?bAutoWidth=="true":def["bAutoWidth"];var bDestroy=$(this).attr("data-table-destroy");def["bDestroy"]=bDestroy!=null?bDestroy=="true":def["bDestroy"];var bFilter=$(this).attr("data-table-filter");def["bFilter"]=bFilter!=null?bFilter=="true":def["bFilter"];var bJQueryUI=$(this).attr("data-table-jqueryui");def["bJQueryUI"]=bJQueryUI!=null?bJQueryUI=="true":def["bJQueryUI"];var bLengthChange=$(this).attr("data-table-length-change");def["bLengthChange"]=bLengthChange!=null?bLengthChange=="true":def["bLengthChange"];var bSort=$(this).attr("data-table-sort");def["bSort"]=bSort!=null?bSort=="true":def["bSort"];var fnDrawCallback=$.fn.dash.dev.resolveNamespace($(this).attr("data-table-draw-callback"));def["fnDrawCallback"]=fnDrawCallback||def["fnDrawCallback"];var fnRowCallback=$.fn.dash.dev.resolveNamespace($(this).attr("data-table-row-callback"));def["fnRowCallback"]=fnRowCallback||def["fnRowCallback"];var fnServerData=$.fn.dash.dev.resolveNamespace($(this).attr("data-table-server-data"));def["fnServerData"]=fnServerData||def["fnServerData"];var iDisplayLength=$(this).attr("data-table-length");def["iDisplayLength"]=iDisplayLength!=null?parseInt(iDisplayLength):def["iDisplayLength"];var sAjaxSource=$.fn.dash.dev.resolveNamespace($(this).attr("data-table-ajax-source"));def["sAjaxSource"]=sAjaxSource||def["sAjaxSource"];def["sPaginationType"]=$(this).attr("data-table-page-type")||def["sPaginationType"];var sDom=$(this).attr("data-table-sdom");def["sDom"]=sDom||def["sDom"];def=$.fn.dash.dev.removeNullAttributes(def);$(this).css("width","100%").dataTable(def);$(this).data("destroy",function($this){$this.find("tr").removeClass().css("width","");$this.dataTable().fnDestroy();});});},function()
{var elements=$.fn.dash.dev.getCurrentElements.call(this,"[data-dialog='true']");elements.each(function()
{var def=$.extend({},$.fn.dash.defaults.dialog);$.fn.dash.dev.loadCustomDefaults(this);var autoOpen=$(this).attr("data-dialog-auto-open");def["autoOpen"]=autoOpen!=null?autoOpen=="true":def["autoOpen"];var draggable=$(this).attr("data-dialog-draggable");def["draggable"]=draggable!=null?draggable=="true":def["draggable"];def["height"]=$(this).attr("data-dialog-height")||def["height"];var modal=$(this).attr("data-dialog-modal");def["modal"]=modal!=null?modal=="true":def["modal"];var resizable=$(this).attr("data-dialog-resize");def["resizable"]=resizable!=null?resizable=="true":def["resizable"];def["title"]=$(this).attr("data-dialog-title")||def["title"];def["width"]=$(this).attr("data-dialog-width")||def["width"];def=$.fn.dash.dev.removeNullAttributes(def);$(this).dialog(def);$(this).data("destroy",function($this){$this.dialog("destroy");});});},function()
{var elements=$.fn.dash.dev.getCurrentElements.call(this,"[data-datepicker='true']");elements.each(function()
{var def=$.extend({},$.fn.dash.defaults.datepicker);$.fn.dash.dev.loadCustomDefaults(this);var changeMonth=$(this).attr("data-datepicker-change-month");def["changeMonth"]=changeMonth!=null?changeMonth=="true":def["changeMonth"];var changeYear=$(this).attr("data-datepicker-change-year");def["changeYear"]=changeYear!=null?changeYear=="true":def["changeYear"];def["yearRange"]=$(this).attr("data-datepicker-year-range")||def["yearRange"];def["minDate"]=$(this).attr("data-datepicker-min-date")||def["minDate"];def["maxDate"]=$(this).attr("data-datepicker-max-date")||def["maxDate"];def=$.fn.dash.dev.removeNullAttributes(def);$(this).datepicker(def);$(this).data("destroy",function($this){$this.datepicker("destroy");});});},function()
{var elements=$.fn.dash.dev.getCurrentElements.call(this,"[data-datetimepicker='true']");elements.each(function()
{var def=$.extend({},$.fn.dash.defaults.datetimepicker);$.fn.dash.dev.loadCustomDefaults(this);var ampm=$(this).attr("data-timepicker-ampm");def["ampm"]=ampm!=null?ampm=="true":def["ampm"];var changeMonth=$(this).attr("data-datepicker-change-month");def["changeMonth"]=changeMonth!=null?changeMonth=="true":def["changeMonth"];var changeYear=$(this).attr("data-datepicker-change-year");def["changeYear"]=changeYear!=null?changeYear=="true":def["changeYear"];def["onSelect"]=$.fn.dash.dev.resolveNamespace($(this).attr("data-timepicker-on-select"));def["stepMinute"]=$(this).attr("data-timepicker-step-minute")||def["stepMinute"];def["yearRange"]=$(this).attr("data-datepicker-year-range")||def["yearRange"];def=$.fn.dash.dev.removeNullAttributes(def);$(this).datetimepicker(def);$(this).data("destroy",function($this){$this.datetimepicker("destroy");});});},function()
{var elements=$.fn.dash.dev.getCurrentElements.call(this,"[data-timepicker='true']");elements.each(function()
{var def=$.extend({},$.fn.dash.defaults.timepicker);$.fn.dash.dev.loadCustomDefaults(this);var ampm=$(this).attr("data-timepicker-ampm");def["ampm"]=ampm!=null?ampm=="true":def["ampm"];def["stepMinute"]=$(this).attr("data-timepicker-step-minute")||def["stepMinute"];def["onSelect"]=$.fn.dash.dev.resolveNamespace($(this).attr("data-timepicker-on-select"));def=$.fn.dash.dev.removeNullAttributes(def);$(this).timepicker(def);$(this).data("destroy",function($this){$this.timepicker("destroy");});});},function()
{var elements=$.fn.dash.dev.getCurrentElements.call(this,"[data-tabs='true']");$(elements).each(function()
{$(this).tabs();$(this).data("destroy",function($this){$this.tabs("destroy");});});}];$.fn.dash.defaults={accordion:{"autoHeight":false,"collapsible":true},autocomplete:{"source":null},button:{"icons":null,"text":true},datatable:{"aaSorting":[],"aaSortingFixed":[],"aoColumnDefs":[],"bAutoWidth":false,"bDestroy":true,"bFilter":true,"bJQueryUI":true,"bLengthChange":true,"bSort":true,"fnDrawCallback":function()
{$("tr",this).removeClass("ui-state-default");$("tr.odd").addClass("ui-state-default");},"fnRowCallback":null,"fnServerData":function(sSource,aoData,fnCallback)
{$.ajax({"type":"POST","contentType":"application/json; charset=utf-8","dataType":"json","url":sSource,"success":function(result)
{fnCallback({"aaData":result.d});}});},"iDisplayLength":10,"sAjaxSource":null,"sPaginationType":"two_button"},datepicker:{"changeMonth":false,"changeYear":false,"yearRange":null,"minDate":null,"maxDate":null},timepicker:{"ampm":true,"stepMinute":5,"onSelect":null,"timeOnly":true},datetimepicker:{"ampm":true,"changeMonth":false,"changeYear":false,"yearRange":null,"resizable":false},dialog:{"autoOpen":false,"draggable":false,"height":"auto","maxDate":null,"minDate":null,"modal":true,"resizable":false,"title":"","width":"auto","yearRange":null},tab:{}};$.fn.dash.dev=function()
{}
$.fn.dash.dev.getCurrentElements=function(selector)
{var $this=$(this);if(this===$.fn.dash.initializers)
{return $(selector);}
else
{return $this.filter(selector);}};$.fn.dash.dev.loadCustomDefaults=function(element)
{var customAttr=$(element).attr("data-dash-custom");if(customAttr!=null)
{customAttr=customAttr.split(" ");for(var i in customAttr)
{var customObj=$.fn.dash.dev.resolveNamespace(customAttr[i]);for(var j in customObj)
{if($(element).attr(j)==null)
{$(element).attr(j,customObj[j]);}}}}};$.fn.dash.dev.removeNullAttributes=function(defs)
{var newDefs={};for(var i in defs)
{if(defs[i]!=null)
newDefs[i]=defs[i];}
return newDefs;};$.fn.dash.dev.resolveNamespace=function(string)
{if(string==null)
{return null;}
string=string.split(".");var resolvedObject=window;try
{for(var i=0;i<string.length;i++)
{resolvedObject=resolvedObject[string[i]];}}
catch(e)
{return null;}
return resolvedObject;};})(jQuery);